import{aM as i,cq as C,ax as $,aE as c,u as v,v as f,F as A,aP as j,I as l,bc as n,bx as y,b_ as h,s as U}from"./app-CqYFsAlS.js";import{s as B}from"./index-BsnOnih4.js";import{s as E}from"./index-eUfx6Jt3.js";import{s as _}from"./index-LogCmm1e.js";import{_ as F}from"./AuthenticatedLayout-C6-aZeaV.js";import"./index-aAc0ImM4.js";import"./index-B8xOHRV7.js";import"./index-BG2EAuaK.js";import"./index-BOaXpPUW.js";import"./index-BS7xWZV9.js";import"./index-BBodYeMi.js";import"./ResponsiveNavLink-D9DItoy7.js";import"./index-CUGleBsN.js";import"./index-CIWkwtLf.js";import"./CheckInModal-DmMZxA1C.js";/* empty css                                                                     */import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex flex-col p-2 justify-center items-center"},N={class:"sm:flex justify-center items-center"},S={class:"w-full flex justify-between p-2"},I={__name:"ProfilePicture",setup(b){const a=i(!1),p=i([]),s=i([]),d=i(null),o=i(!1),m=C().props.user;$(()=>{const e=Array.isArray(m.profile_pictures)?m.profile_pictures:JSON.parse(m.profile_pictures||"[]");s.value=Array(3).fill(null).map((t,r)=>e[r]?`/storage/profile_pictures/${e[r]}`:null)});function g(e){o.value||(d.value=e,a.value=!0)}function P(e){p.value=Array.from(e.target.files)}async function w(){if(p.value.length===0){alert("Please select an image to upload.");return}o.value=!0;let e=new FormData;e.append("photo",p.value[0]),e.append("index",d.value);try{let t=await h.post("/profile/update-photo",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Server response:",t.data),s.value[d.value]=`/storage/profile_pictures/${t.data.profile_picture}`,alert("Profile picture updated successfully."),a.value=!1}catch(t){console.error(t),alert("An error occurred while uploading the profile picture.")}finally{o.value=!1}}async function x(e){if(!(o.value||!confirm("Are you sure you want to remove this profile picture?"))){o.value=!0;try{let r=await h.post("/profile/remove-photo",{index:e});console.log("Server response:",r.data),s.value[e]=null,alert("Profile picture removed successfully.")}catch(r){console.error(r),alert("An error occurred while removing the profile picture.")}finally{o.value=!1}}}return(e,t)=>(c(),v("div",D,[f("div",N,[(c(!0),v(A,null,j(s.value,(r,u)=>(c(),v("div",{key:u,class:"w-48 h-72 overflow-hidden"},[l(n(B),{src:r||"/images/profile_placeholder.jpg",alt:"Profile Picture",class:"w-48 h-48 object-cover",preview:""},null,8,["src"]),f("div",S,[l(n(_),{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:k=>x(u),disabled:o.value||!s.value[u]},null,8,["onClick","disabled"]),l(n(_),{icon:"pi pi-file-edit",class:"p-button-rounded p-button-primary",onClick:k=>g(u),disabled:o.value},null,8,["onClick","disabled"])])]))),128))]),l(n(E),{visible:a.value,"onUpdate:visible":t[0]||(t[0]=r=>a.value=r),modal:"",header:"Edit Profile Picture",style:{width:"25rem"}},{default:y(()=>[f("input",{type:"file",onChange:P},null,32),l(n(_),{label:"Upload",onClick:w,severity:"secondary",class:"my-3",disabled:o.value},null,8,["disabled"])]),_:1},8,["visible"])]))}},M={class:"py-12 px-8 bg-primary-radial"},oe={__name:"UpdateProfilePicture",setup(b){return(a,p)=>(c(),U(F,null,{default:y(()=>[f("div",M,[l(I)])]),_:1}))}};export{oe as default};
