import{_ as C}from"./AuthenticatedLayout-BbFlOHE_.js";import{aM as n,cm as A,ax as E,aE as m,u as _,v as s,F as j,aP as B,I as l,bc as c,bx as b,b_ as y,s as F}from"./app-DmW52sVY.js";import S from"./UpdateProfileInformationForm-B0EmZkzX.js";import{s as U}from"./index-RjRP71tX.js";import{s as V}from"./index-C1718RFK.js";import{s as h}from"./index-C_3sLAQI.js";import"./ResponsiveNavLink-w8IYxMkn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BJ15Ulel.js";import"./index-BipAeG5W.js";import"./index-C29WRRSE.js";import"./index-B4sutN63.js";import"./CheckInModal-D2zsaqQq.js";/* empty css                                                                     */import"./TextInput-BtJYNo_u.js";import"./InputLabel-CvItTXrE.js";import"./PrimaryButton-2s07ubmy.js";import"./index-lZVO7W44.js";import"./index-2RJNvPQE.js";import"./index-BkEGs8c0.js";import"./index-DOaunKE6.js";import"./index-DrYVoKVK.js";import"./index-lIwCBaXZ.js";import"./index-DLM0IZZB.js";import"./index-B1iaLLRC.js";const D={class:"flex flex-col p-2 justify-center items-center"},N={class:"w-full flex sm:flex-col sm:space-y-4 justify-center items-center"},I={class:"w-full flex justify-between p-2"},w={__name:"ProfilePicture",setup(f){const i=n(!1),u=n([]),a=n([]),d=n(null),r=n(!1),v=A().props.user;E(()=>{const e=Array.isArray(v.profile_pictures)?v.profile_pictures:JSON.parse(v.profile_pictures||"[]");a.value=Array(3).fill(null).map((o,t)=>e[t]?`/storage/profile_pictures/${e[t]}`:null)});function g(e){r.value||(d.value=e,i.value=!0)}function P(e){u.value=Array.from(e.target.files)}async function x(){if(u.value.length===0){alert("Please select an image to upload.");return}r.value=!0;let e=new FormData;e.append("photo",u.value[0]),e.append("index",d.value);try{let o=await y.post("/profile/update-photo",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Server response:",o.data),a.value[d.value]=`/storage/profile_pictures/${o.data.profile_picture}`,alert("Profile picture updated successfully."),i.value=!1}catch(o){console.error(o),alert("An error occurred while uploading the profile picture.")}finally{r.value=!1}}async function $(e){if(!(r.value||!confirm("Are you sure you want to remove this profile picture?"))){r.value=!0;try{let t=await y.post("/profile/remove-photo",{index:e});console.log("Server response:",t.data),a.value[e]=null,alert("Profile picture removed successfully.")}catch(t){console.error(t),alert("An error occurred while removing the profile picture.")}finally{r.value=!1}}}return(e,o)=>(m(),_("div",D,[s("div",N,[(m(!0),_(j,null,B(a.value,(t,p)=>(m(),_("div",{key:p,class:"w-40 h-40 sm:w-48 sm:h-72 overflow-hidden relative"},[l(c(U),{src:t||"/images/profile_placeholder.jpg",alt:"Profile Picture",class:"w-auto h-24 sm:w-48 sm:h-48 object-cover",preview:""},null,8,["src"]),s("div",I,[l(c(h),{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:k=>$(p),disabled:r.value||!a.value[p]},null,8,["onClick","disabled"]),l(c(h),{icon:"pi pi-file-edit",class:"p-button-rounded p-button-primary",onClick:k=>g(p),disabled:r.value},null,8,["onClick","disabled"])])]))),128))]),l(c(V),{visible:i.value,"onUpdate:visible":o[0]||(o[0]=t=>i.value=t),modal:"",header:"Edit Profile Picture",style:{width:"25rem"}},{default:b(()=>[s("input",{type:"file",onChange:P},null,32),l(c(h),{label:"Upload",onClick:x,severity:"secondary",class:"my-3",disabled:r.value},null,8,["disabled"])]),_:1},8,["visible"])]))}},M={class:"py-12 w-screen md:px-8"},J={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg md:flex w-full justify-between"},L={class:"sm:w-2/3"},O={class:"block sm:hidden"},Q={class:"hidden sm:block w-1/3"},ve={__name:"Edit",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(f){return(i,u)=>(m(),F(C,null,{default:b(()=>[s("div",M,[s("div",J,[s("div",L,[s("div",O,[l(w)]),l(S,{"must-verify-email":f.mustVerifyEmail,status:f.status,class:"max-w-xl"},null,8,["must-verify-email","status"])]),s("div",Q,[l(w)])])])]),_:1}))}};export{ve as default};
